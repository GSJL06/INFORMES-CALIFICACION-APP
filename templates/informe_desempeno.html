<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Informe de Calificaci√≥n de Desempe√±o - {{ datos.nombre_establecimiento }}
    </title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/report.css') }}"
    />
    {% if preview_mode %}
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
    {% endif %}
  </head>
  <body>
    {% if preview_mode %}
    <!-- Barra de herramientas de vista previa -->
    <div class="preview-toolbar no-print">
      <div class="toolbar-content">
        <span>üìÑ Vista Previa del Informe</span>
        <div class="toolbar-actions">
          <a
            href="{{ url_for('descargar', formato='html') }}"
            class="btn btn-secondary"
            >‚¨áÔ∏è Descargar HTML</a
          >
          <a
            href="{{ url_for('descargar', formato='pdf') }}"
            class="btn btn-primary"
            >üì• Descargar PDF</a
          >
          <a href="{{ url_for('index') }}" class="btn btn-secondary"
            >‚úèÔ∏è Editar Datos</a
          >
          <button onclick="window.print()" class="btn btn-success">
            üñ®Ô∏è Imprimir
          </button>
        </div>
      </div>
    </div>
    {% endif %}

    <div class="report-container">
      <!-- ========== P√ÅGINA 1 ========== -->
      <div class="page">
        <!-- Encabezado -->
        <header class="report-header">
          <div class="header-left">
            {% if datos.logo_cliente %}
            <img
              src="{{ url_for('static', filename=datos.logo_cliente) }}"
              alt="Logo Cliente"
              class="logo-cliente"
            />
            {% endif %}
            <img
              src="{{ url_for('static', filename='Netux_Logo.png') }}"
              alt="Netux"
              class="logo-netux"
            />
          </div>
          <div class="header-center">
            <h1>INFORME DE CALIFICACI√ìN DE DESEMPE√ëO</h1>
            <h2>SISTEMA DE TELEMETR√çA</h2>
          </div>
          <div class="header-right">
            <table class="metadata-table">
              <tr>
                <td><strong>C√≥digo:</strong></td>
                <td>{{ datos.codigo }}</td>
              </tr>
              <tr>
                <td><strong>Versi√≥n:</strong></td>
                <td>{{ datos.version }}</td>
              </tr>
              <tr>
                <td><strong>Vigencia:</strong></td>
                <td>{{ datos.vigencia }}</td>
              </tr>
              <tr>
                <td><strong>P√°gina:</strong></td>
                <td>
                  <span class="page-num">1</span> de
                  <span class="total-pages">X</span>
                </td>
              </tr>
            </table>
          </div>
        </header>

        <!-- Proceso -->
        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <!-- INFORMACI√ìN PRINCIPAL -->
          <section class="section">
            <h2 class="section-title">INFORMACI√ìN PRINCIPAL</h2>
            <table class="info-table">
              <tr>
                <td class="label-cell"><strong>T√≠tulo:</strong></td>
                <td>{{ datos.titulo }}</td>
              </tr>
              <tr>
                <td class="label-cell">
                  <strong>Nombre del establecimiento:</strong>
                </td>
                <td>{{ datos.nombre_establecimiento }}</td>
              </tr>
              <tr>
                <td class="label-cell">
                  <strong>Direcci√≥n del establecimiento:</strong>
                </td>
                <td>{{ datos.direccion_establecimiento }}</td>
              </tr>
              <tr>
                <td class="label-cell">
                  <strong>Informe de calificaci√≥n:</strong>
                </td>
                <td>{{ datos.numero_informe }}</td>
              </tr>
              <tr>
                <td class="label-cell"><strong>Fecha calificaci√≥n:</strong></td>
                <td>{{ datos.fecha_calificacion }}</td>
              </tr>
            </table>
          </section>

          <!-- OBJETIVO -->
          <section class="section">
            <h2 class="section-title">OBJETIVO</h2>
            <p>
              Demostrar que el sistema de telemetr√≠a del establecimiento
              <strong>{{ datos.nombre_establecimiento }}</strong> opera seg√∫n
              las especificaciones establecidas, cumpliendo con los criterios de
              aceptaci√≥n definidos para el monitoreo de temperatura y la
              generaci√≥n de alarmas en tiempo real.
            </p>
          </section>

          <!-- ALCANCE -->
          <section class="section">
            <h2 class="section-title">ALCANCE</h2>
            <p>
              Este informe de calificaci√≥n de desempe√±o aplica al sistema de
              telemetr√≠a <strong>{{ datos.titulo }}</strong> instalado en
              <strong>{{ datos.nombre_establecimiento }}</strong>, ubicado en
              <strong>{{ datos.direccion_establecimiento }}</strong>. La
              calificaci√≥n incluye la verificaci√≥n de la transmisi√≥n de datos,
              funcionamiento de alarmas y tiempos de respuesta de todos los
              dispositivos sometidos a prueba.
            </p>
          </section>

          <!-- RESPONSABILIDADES -->
          <section class="section">
            <h2 class="section-title">RESPONSABILIDADES</h2>
            <ul class="responsibility-list">
              <li>
                <strong>Personal de Netux:</strong> Ejecutar las pruebas de
                desempe√±o seg√∫n el procedimiento establecido, documentar los
                resultados y elaborar el informe de calificaci√≥n.
              </li>
              <li>
                <strong>Tecn√≥logo del Establecimiento:</strong> Proporcionar
                acceso a los equipos y √°reas necesarias, verificar las
                condiciones operativas durante las pruebas.
              </li>
              <li>
                <strong>Ingeniero Netux:</strong> Revisar y validar los
                resultados de las pruebas, asegurar el cumplimiento de los
                criterios de aceptaci√≥n.
              </li>
              <li>
                <strong>Ingeniero del Establecimiento:</strong> Aprobar el
                informe de calificaci√≥n y verificar que los resultados cumplan
                con los requisitos del establecimiento.
              </li>
            </ul>
          </section>
        </div>

        <!-- Pie de p√°gina -->
        {% include 'partials/footer_firmas.html' %}
      </div>

      <!-- ========== P√ÅGINA 2 ========== -->
      <div class="page">
        <header class="report-header">
          <div class="header-left">
            {% if datos.logo_cliente %}
            <img
              src="{{ url_for('static', filename=datos.logo_cliente) }}"
              alt="Logo Cliente"
              class="logo-cliente"
            />
            {% endif %}
            <img
              src="{{ url_for('static', filename='Netux_Logo.png') }}"
              alt="Netux"
              class="logo-netux"
            />
          </div>
          <div class="header-center">
            <h1>INFORME DE CALIFICACI√ìN DE DESEMPE√ëO</h1>
            <h2>SISTEMA DE TELEMETR√çA</h2>
          </div>
          <div class="header-right">
            <table class="metadata-table">
              <tr>
                <td><strong>C√≥digo:</strong></td>
                <td>{{ datos.codigo }}</td>
              </tr>
              <tr>
                <td><strong>Versi√≥n:</strong></td>
                <td>{{ datos.version }}</td>
              </tr>
              <tr>
                <td><strong>Vigencia:</strong></td>
                <td>{{ datos.vigencia }}</td>
              </tr>
              <tr>
                <td><strong>P√°gina:</strong></td>
                <td>
                  <span class="page-num">2</span> de
                  <span class="total-pages">X</span>
                </td>
              </tr>
            </table>
          </div>
        </header>

        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <!-- ELEMENTOS NECESARIOS -->
          <section class="section">
            <h2 class="section-title">ELEMENTOS NECESARIOS</h2>
            <p>
              <strong
                >Materiales o suministros necesarios para efectuar la
                calificaci√≥n de desempe√±o:</strong
              >
            </p>
            <ul class="bullet-list">
              <li>Listado de usuario de Alarmas.</li>
              <li>
                Orden de servicio con n√∫mero de equipos a ejecutar la prueba.
              </li>
              <li>Computador con acceso a internet.</li>
              <li>Acceso a correo electr√≥nico: micem@netuxtecnologia.com</li>
            </ul>
          </section>

          <!-- PROCEDIMIENTO -->
          <section class="section">
            <h2 class="section-title">PROCEDIMIENTO</h2>
            <ol class="procedure-list">
              <li>Ejecutar el procedimiento normal de las alarmas.</li>
              <li>
                Adjuntar todos los formularios que se usan en el procedimiento,
                incluyendo la numeraci√≥n.
              </li>
              <li>Completar el formulario resumen del procedimiento.</li>
              <li>Realizar lista de verificaci√≥n de los resultados.</li>
              <li>
                Adjuntar los resultados del procedimiento, datos de operaci√≥n y
                los c√°lculos.
              </li>
            </ol>
          </section>
        </div>

        {% include 'partials/footer_firmas.html' %}
      </div>

      <!-- ========== P√ÅGINA 3: LISTA DE VERIFICACI√ìN 1 ========== -->
      <div class="page">
        {% include 'partials/header.html' %}
        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <section class="section">
            <h2 class="section-title">LISTA DE VERIFICACI√ìN 1</h2>
            <p>
              Registro de resumen de datos (a ser preparado para el
              procedimiento espec√≠fico sometido a prueba)
            </p>

            <table class="verification-table">
              <thead>
                <tr>
                  <th>√çtem</th>
                  <th>Actividad</th>
                  <th>Observaci√≥n</th>
                  <th colspan="2">√çtem Cumplido</th>
                </tr>
                <tr>
                  <th></th>
                  <th></th>
                  <th></th>
                  <th>SI</th>
                  <th>NO</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>
                    Verificar la correcta transmisi√≥n y funcionalidad de las
                    variables sometidas bajo prueba.
                  </td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>
                    Segmentar el listado de variables bajo prueba y los
                    contactos de notificaci√≥n.
                  </td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>
                    Verificar dentro del motor de alarmas los registros de
                    configuraci√≥n.
                  </td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>
                    Ajustar los par√°metros para generar excursi√≥n de prueba.
                  </td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>5</td>
                  <td>Registrar el primer dato en excursi√≥n.</td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>6</td>
                  <td>Ejecutar la prueba durante m√≠nimo 5 minutos.</td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>7</td>
                  <td>Restablecer los par√°metros de configuraci√≥n.</td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
                <tr>
                  <td>8</td>
                  <td>
                    Verificar la transmisi√≥n y normalizaci√≥n de las lecturas.
                  </td>
                  <td>Sin novedad</td>
                  <td class="check-cell">X</td>
                  <td class="check-cell"></td>
                </tr>
              </tbody>
            </table>
          </section>
        </div>
        {% include 'partials/footer_firmas.html' %}
      </div>

      <!-- ========== P√ÅGINA 4: EVIDENCIAS DISPOSITIVOS ========== -->
      <div class="page">
        {% include 'partials/header.html' %}
        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <section class="section">
            <h2 class="section-title">
              Evidencias fotogr√°ficas de las actividades realizadas
            </h2>
            <h3 class="subsection-title">
              1. Verificar la correcta transmisi√≥n y funcionalidad de las
              variables sometidas bajo prueba en la plataforma de monitoreo de
              telemetr√≠a.
            </h3>

            {% if datos.dispositivos %} {% for dispositivo in datos.dispositivos
            %}
            <div class="device-evidence-block">
              <h4 class="device-title">{{ dispositivo.nombre }}</h4>
              {% if dispositivo.evidencia %}
              <div class="device-evidence-image">
                <img
                  src="{{ url_for('static', filename=dispositivo.evidencia) }}"
                  alt="Evidencia {{ dispositivo.nombre }}"
                />
              </div>
              {% else %}
              <div class="device-evidence-placeholder">
                <p>
                  Captura de pantalla de la plataforma Netux para este
                  dispositivo
                </p>
              </div>
              {% endif %}
            </div>
            {% endfor %} {% endif %} {% if datos.evidencias %}
            <div class="evidencias-generales">
              {% for evidencia in datos.evidencias %}
              <div class="evidencia-item">
                <img
                  src="{{ url_for('static', filename=evidencia) }}"
                  alt="Evidencia"
                />
              </div>
              {% endfor %}
            </div>
            {% endif %}
          </section>
        </div>
        {% include 'partials/footer_firmas.html' %}
      </div>

      <!-- ========== P√ÅGINA 5: CONTACTOS ========== -->
      <div class="page">
        {% include 'partials/header.html' %}
        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <section class="section">
            <h3 class="subsection-title">
              2. Listado de dispositivos y contactos de notificaci√≥n
            </h3>

            <h4>Listado de dispositivos en prueba:</h4>
            {% if datos.dispositivos %}
            <ul class="device-list">
              {% for dispositivo in datos.dispositivos %}
              <li>{{ dispositivo.nombre }}</li>
              {% endfor %}
            </ul>
            {% endif %}

            <h4>Contactos de notificaci√≥n:</h4>
            {% if datos.contactos %}
            <table class="contacts-table">
              <thead>
                <tr>
                  <th>Nombre responsable</th>
                  <th>Tel√©fono</th>
                  <th>Correo</th>
                </tr>
              </thead>
              <tbody>
                {% for contacto in datos.contactos %}
                <tr>
                  <td>{{ contacto.nombre }}</td>
                  <td>{{ contacto.telefono }}</td>
                  <td>{{ contacto.correo }}</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
            {% endif %}
          </section>
        </div>
        {% include 'partials/footer_firmas.html' %}
      </div>

      <!-- ========== P√ÅGINA FINAL: RESULTADOS Y CONCLUSIONES ========== -->
      <div class="page">
        {% include 'partials/header.html' %}
        <div class="proceso-bar">
          <strong>Proceso:</strong> {{ datos.proceso }}
        </div>

        <div class="page-content">
          <!-- INFORME DE DESVIACIONES -->
          <section class="section">
            <h2 class="section-title">INFORME DE DESVIACIONES</h2>
            <table class="deviations-table">
              <tr>
                <td class="label-cell"><strong>Desviaci√≥n(es):</strong></td>
                <td>{{ datos.desviaciones }}</td>
              </tr>
              <tr>
                <td class="label-cell">
                  <strong>Justificaci√≥n de la aceptaci√≥n:</strong>
                </td>
                <td>{{ datos.justificacion_desviacion }}</td>
              </tr>
              <tr>
                <td class="label-cell">
                  <strong>Impacto sobre la operaci√≥n:</strong>
                </td>
                <td>{{ datos.impacto_desviacion }}</td>
              </tr>
            </table>
          </section>

          <!-- RESULTADOS Y CONCLUSIONES -->
          <section class="section">
            <h2 class="section-title">
              INFORME DE CALIFICACI√ìN DE ESPECIFICACIONES FUNCIONALES
            </h2>

            <h3>Resultados:</h3>
            <div class="text-block">
              {{ datos.resultados|default('Los resultados de la calificaci√≥n de
              desempe√±o demuestran que el sistema de telemetr√≠a opera seg√∫n las
              especificaciones establecidas.', true) }}
            </div>

            <h3>Conclusiones:</h3>
            <div class="text-block">
              {{ datos.conclusiones|default('El sistema de telemetr√≠a cumple con
              todos los criterios de aceptaci√≥n establecidos para la
              calificaci√≥n de desempe√±o.', true) }}
            </div>
          </section>

          <!-- BLOQUE DE FIRMAS FINAL -->
          <section class="section signatures-section">
            <h2 class="section-title">FIRMAS DE APROBACI√ìN</h2>
            <table class="signatures-table">
              <tr>
                <td class="signature-cell">
                  <div class="signature-line"></div>
                  <strong>Realiz√≥</strong><br />
                  {{ datos.elaboro_nombre }}<br />
                  <small>{{ datos.elaboro_cargo }}</small><br />
                  <small>NETUX SAS</small><br />
                  <small>Fecha: {{ datos.fecha_elaboracion }}</small>
                </td>
                <td class="signature-cell">
                  <div class="signature-line"></div>
                  <strong>Verific√≥</strong><br />
                  {{ datos.reviso_nombre }}<br />
                  <small>{{ datos.reviso_cargo }}</small><br />
                  <small>NETUX SAS</small><br />
                  <small>Fecha: {{ datos.fecha_elaboracion }}</small>
                </td>
                <td class="signature-cell">
                  <div class="signature-line"></div>
                  <strong>Aprob√≥</strong><br />
                  {{ datos.aprobo_nombre }}<br />
                  <small>{{ datos.aprobo_cargo }}</small><br />
                  <small>{{ datos.aprobo_entidad }}</small><br />
                  <small>Fecha: {{ datos.fecha_elaboracion }}</small>
                </td>
              </tr>
            </table>
          </section>
        </div>

        {% include 'partials/footer_firmas.html' %}
      </div>
    </div>
    <!-- fin report-container -->
  </body>
</html>
